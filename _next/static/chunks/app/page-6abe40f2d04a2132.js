(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3930:()=>{},4436:(e,t,r)=>{"use strict";r.d(t,{k5:()=>h});var a=r(2115),n={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},l=a.createContext&&a.createContext(n),i=["attr","size","title"];function o(){return(o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach(function(t){var a,n,l;a=e,n=t,l=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var a=r.call(e,t||"default");if("object"!=typeof a)return a;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in a?Object.defineProperty(a,n,{value:l,enumerable:!0,configurable:!0,writable:!0}):a[n]=l}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function h(e){return t=>a.createElement(d,o({attr:u({},e.attr)},t),function e(t){return t&&t.map((t,r)=>a.createElement(t.tag,u({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:n,size:l,title:s}=e,h=function(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;r[a]=e[a]}return r}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)r=l[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}(e,i),d=l||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),a.createElement("svg",o({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,n,h,{className:r,style:u(u({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),s&&a.createElement("title",null,s),e.children)};return void 0!==l?a.createElement(l.Consumer,null,e=>t(e)):t(n)}},4493:()=>{},8563:(e,t,r)=>{Promise.resolve().then(r.bind(r,8578))},8578:(e,t,r)=>{"use strict";let a;r.r(t),r.d(t,{default:()=>eh});var n=r(5155),l=r(2115),i=r(9911);r(9014),r(3930);let o=async e=>{let t={},r=e.map(e=>new Promise(r=>{let a=new Image;a.src=e,a.onload=()=>{t[e]=a,r()}}));return await Promise.all(r),t},s={start:0,end:.64},u={start:.64,end:1},h=(e,t,r)=>Math.max(t,Math.min(r,e)),d=(e,t,r)=>h((e-t)/(r-t),0,1),c=e=>e*e*(3-2*e);function m(e,t){let r=t%90/90,a=d(r,s.start,s.end),n=a>0&&a<1?Math.sin(Math.PI*a):0,l=c(n),i=h(d(r,u.start,u.end)/.6,0,1),o=i>0?Math.sin(Math.PI/2*i):0,m=n>.002,f=!m&&o>.002,p=f?o:0,g=c(p),b=.76*e.width,x=.24*e.width,v=.78*e.height,w=.12;if(m)w=Math.max(.6,.12+.88*Math.pow(n,.9));else{let e=0;r>=s.end&&r<s.end+.08&&(e=1-d(r,s.end,s.end+.08));let t=(s.start-.08+1)%1,a=0;t<s.start?r>=t&&r<s.start&&(a=d(r,t,s.start)):(r>=t||r<s.start)&&(a=r>=t?d(r,t,1):d(r,0,s.start)),w=h(.12+.45*Math.max(e,a),.12,.85)}let M=0;return m?M=Math.exp(-Math.pow((n-.18)/.22,2)):r>=s.end&&r<s.end+.08&&(M=1-d(r,s.end,s.end+.08)),{isDay:m,sun:{visible:m,alt:n,easedAlt:l,x:b,y:v+(80-v)*l},moon:{visible:f,alt:p,easedAlt:g,x:x,y:v+(80-v)*g},skyAmt:w,twilightWarm:h(M,0,1)}}let f=e=>Math.max(0,Math.min(1,e)),p=(e,t,r)=>[Math.round(e[0]+(t[0]-e[0])*r),Math.round(e[1]+(t[1]-e[1])*r),Math.round(e[2]+(t[2]-e[2])*r)],g=e=>"rgb(".concat(e[0],", ").concat(e[1],", ").concat(e[2],")"),b=(e,t,r)=>f((e-t)/(r-t)),x=(e,t,r)=>{let a=b(e,t,r);return a*a*(3-2*a)},v=(e,t,r)=>e+(t-e)*r,w=[{key:"scene_1",frames:["/ground/scene_1/scene_a.png","/ground/scene_1/scene_b.png"]},{key:"scene_2",frames:["/ground/scene_2/scene_a.png","/ground/scene_2/scene_b.png"]},{key:"scene_3",frames:["/ground/scene_3/scene_a.png","/ground/scene_3/scene_b.png"]},{key:"scene_4",frames:["/ground/scene_4/scene_a.png","/ground/scene_4/scene_b.png"]}],M=[{from:"scene_1",to:"scene_2",frame:"/ground/transitions/transition_1.png"},{from:"scene_2",to:"scene_3",frame:"/ground/transitions/transition_2.png"},{from:"scene_3",to:"scene_4",frame:"/ground/transitions/transition_3.png"},{from:"scene_4",to:"scene_1",frame:"/ground/transitions/transition_4.png"}],y=[{key:"start",duration:1,frameRate:0,frames:["/sprite/start1.png","/sprite/start2.png"],oneShot:!0,holdLastFrame:!0},{key:"run",duration:"auto",frameRate:9.5,frames:["/sprite/run1.png","/sprite/run2.png"],oneShot:!1,holdLastFrame:!1},{key:"jump",duration:1,frameRate:0,frames:["/sprite/jump1.png","/sprite/jump2.png","/sprite/jump3.png","/sprite/jump4.png","/sprite/jump5.png"],oneShot:!0,holdLastFrame:!1},{key:"disappear",duration:4,frameRate:0,frames:[],oneShot:!1,holdLastFrame:!1}],j={bpm:161.5,framesPerBeat:2,audioLeadSec:1.544,runStartsAtSec:1},S=(()=>{let e=(90-y.reduce((e,t)=>e+("number"==typeof t.duration?t.duration:0),0))/Math.max(1,y.filter(e=>"auto"===e.duration).length),t=0;return y.map(r=>{let a="number"==typeof r.duration?r.duration:e,n={key:r.key,start:t,end:t+a,duration:a,frameRate:r.frameRate,frames:r.frames,oneShot:!!r.oneShot,holdLastFrame:!!r.holdLastFrame};return t+=a,n})})(),O={scale:.2,offsetX:0,offsetY:0};function P(e){var t,r,a,n;let l=S.find(e=>"run"===e.key);if(!l)return[];let i=null!=(r=l.start)?r:0,o=null!=(a=l.duration)?a:0,s=Math.max(1,i+o+5),u=(Number.isFinite(e)&&e>0?e:s)/s,h=i*u,d=o*u,c=h+d,m=5*u,f=[];w.forEach((e,t)=>{f.push(...e.frames);let r=w[(t+1)%w.length].key,a=M.find(t=>t.from===e.key&&t.to===r);a&&f.push(a.frame)});let p=null!=(n=null==(t=w[0])?void 0:t.frames)?n:[],g=p.length>=2?p.slice(0,2).concat(p[0]):p.slice(0,1),b=f.length,x=g.length,v=Math.max(0,d-m),y=b>0?v/b:0,j=x>0?m/x:0,O=[],P=h;for(let e of f){let t=P,r=Math.min(P+y,c);r>t&&O.push({imagePath:e,startTime:t,endTime:r}),P=r}for(let e of g){let t=P,r=Math.min(P+j,c);r>t&&O.push({imagePath:e,startTime:t,endTime:r}),P=r}return O.length&&(O[O.length-1].endTime=c),O}let T="/parallax/star.png",_=P(),k=_.length?_[_.length-1].startTime:Number.POSITIVE_INFINITY,C=(e,t,r)=>Math.max(t,Math.min(r,e)),I=e=>{let t=Math.imul(0x9e3779b9^e,0x85ebca6b);return t^=t>>>13,t=Math.imul(t,0xc2b2ae35),((t^=t>>>16)>>>0)/0xffffffff},E=e=>{let t=e.slice();for(let e=t.length-1;e>0;e--){let r=Math.floor(I(12345+e)*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t},A=[],N=[],L=.1379,R=0,F=-1,U=null,D="/parallax/cloud.png",z=(()=>{let e=1337;return()=>{let t=Math.imul((e=e+0x6d2b79f5>>>0)^e>>>15,1|e);return(((t^=t+Math.imul(t^t>>>7,61|t))^t>>>14)>>>0)/0x100000000}})(),W=(e,t,r)=>Math.max(t,Math.min(r,e)),B=e=>{let t=W(e,0,1);return t*t*(3-2*t)},G=e=>{let t=Math.imul(0x9e3779b9^e,0x85ebca6b);return t^=t>>>13,t=Math.imul(t,0xc2b2ae35),((t^=t>>>16)>>>0)/0xffffffff},X=null,Y=!1,K=null,V=0,q=!1,H=null,J=!1,Q=e=>Math.max(0,Math.min(1,e)),Z=(e,t,r)=>{let a=Q((r-e)/(t-e));return a*a*(3-2*a)},$=(e,t,r)=>Math.max(t,Math.min(r,e)),ee=e=>e.startsWith("/")?e:"/"+e,et=null,er=[],ea=P(),en=e=>e.startsWith("/")?e:"/"+e,el={enabled:!0,in:{start:0,duration:1.5,ease:"outCubic"},out:{start:82,duration:8,ease:"inCubic"}};function ei(e,t){let r=Math.min(1,Math.max(0,e));return"outCubic"===t?1-Math.pow(1-r,3):Math.pow(r,3)}function eo(e){let{canvas:t,ctx:r,currentTime:n,isPlaying:i,duration:s}=e,[u,h]=(0,l.useState)({});return(0,l.useEffect)(()=>{let e=[...w.flatMap(e=>e.frames),...M.map(e=>e.frame)];o(Array.from(new Set([...e,...S.flatMap(e=>e.frames),"/elements/sun.png","/elements/moon.png","/parallax/cloud.png","/parallax/star.png","/elements/hole.png"]))).then(h)},[]),(0,l.useEffect)(()=>{if(t&&r&&0!==Object.keys(u).length){r.clearRect(0,0,t.width,t.height),function(e,t,r){var n;let{skyAmt:l,twilightWarm:i,sun:o,moon:s}=m(t,r),u=[255,120,40],h=Number.isFinite(null==o?void 0:o.alt)?o.alt:null!=a?a:.1;if(void 0!==a){let e=h-a;e>.12?h=a+.12:e<-.12&&(h=a-.12)}let d=void 0===a?h:v(a,h,.35);a=d;let c=f(null!=(n=null==s?void 0:s.easedAlt)?n:0),w=1-x(c,.2,.35),M=x(d,-.05,.1),y=p([15,25,60],[90,165,235],M),j=p([30,40,90],[170,210,245],M),S=1-x(c,.7,.92),O=f((d<0?1-x(-d,.02,.1):0)*(1-x(c,.15,.35))*S*1.5),P=f(O*Math.pow(1-b(-d,.015,.06),2)),T=f((d>=-.15?x(d,-.15,.12)*(1-x(d,.32,.55)):0)*S*1.1),_=Math.max(T,P)*(1-.28*(1-f(Math.abs(d)/.06)))*Math.pow(1-b(-d,.02,.08),2),k=f(x(d,.04,.22)+.35*i*w),C=p(j,[255,180,110],.52*f(k*S*.45+.55*_)+.24*_);C=p(C,u,(.22*T+.28*P)*w),C=p(C,[230,60,60],.22*P),C=p(C,[255,165,130],.08*P);let I=p(u,[252,95,160],.22*P*w),E=p(y,[120,100,210],.05*T+.16*P);E=p(E,[75,70,150],.07*P);let A=p(E,I,.18*P),N=p(A,C,.5+.1*_),L=.04*P,R=f(.55+.08*(1-M)-.08*_-L),F=f(.8+.05*(1-M)-.09*_-L),U=f(R-.03*P),D=f(F-.06*P),z=e=>f(.75*e),W=[{p:z(0),c:g(E)},{p:z(U),c:g(N)},{p:z(D),c:g(C)},{p:.75,c:g(C)},{p:1,c:g(C)}].sort((e,t)=>e.p-t.p);for(let e=1;e<W.length;e++)W[e].p<=W[e-1].p&&(W[e].p=Math.min(1,W[e-1].p+1e-4));let B=e.createLinearGradient(0,0,0,t.height);W.forEach(e=>B.addColorStop(e.p,e.c)),e.fillStyle=B,e.fillRect(0,0,t.width,t.height)}(r,t,n),function(e,t,r,a){if(!function(e,t){let r=t[T];if(r){if(24!==A.length){let t=.3*e.height,a=function(e,t,r){let a=r/25*.18,n=[];for(let l=0;l<24;l++){let i=(l+1)/(e+1),o=2*I(1e3+l)-1;n.push(C(4+i*r+o*a,4,t+r))}return n}(24,4,t),n=[];for(let e=0;e<24;e++){let l=.26+.28*I(3e3+e),i=Math.max(2,r.width*l),o=Math.max(2,r.height*l),s=a[e],u=14*(.85+.9*C((s-4)/Math.max(1,t),0,1))*(.9+.2*I(7007+e));n.push({kind:"star",src:T,y:s,w:i,h:o,baseAlpha:1,alive:!1,x:0,lastT:0,speed0:u,spawnAt:0,boostUntil:0,boostMul:3})}A=n}24!==N.length&&(N=E([...Array(24).keys()]))}}(t,a),24!==A.length||24!==N.length)return;let{sun:n}=m(t,r),l=!!(null==n?void 0:n.visible),i=r<k;if(null===U&&(U=l),U&&!l&&(R=0,F=i?r-.3:-1),!U&&l)for(let e of(R=0,F=-1,A))e.alive=!1;U=l;let o=!l&&i;if(o)for(F<0&&(F=r-.2);R<12&&r>=F;)!function(e,t,r){if(24!==N.length)return;let a=r.width,n=A[N[e%24]];if(!n)return;let l=.9*a,i=L=(L+.6180339887498949)%1,o=(I(54321+e)-.5)*(l/24)*.1;n.alive=!0,n.x=a+i*l+o,n.lastT=t,n.spawnAt=t,n.boostUntil=t+.2}(R,r,t),R++,F+=.055;else F=-1;for(let n of A){let l=a[n.src];if(!l||!n.alive)continue;let i=Math.max(0,r-n.lastT);n.lastT=r;let s=o?n.speed0:0;n.x-=s*i;let u=t.width,h=u+n.w;if(o)for(;n.x<-n.w;)n.x+=h;else if(n.x<-n.w){n.alive=!1;continue}e.save(),e.globalAlpha=n.baseAlpha,e.globalCompositeOperation="lighter",e.drawImage(l,Math.round(n.x),Math.round(n.y),n.w,n.h),o&&n.x+n.w<u&&e.drawImage(l,Math.round(n.x+h),Math.round(n.y),n.w,n.h),e.restore()}}(r,t,n,u);let e=u["/elements/sun.png"],l=u["/elements/moon.png"],{sun:i,moon:o}=m(t,n);(i.visible||o.visible)&&(i.visible?(r.save(),r.globalCompositeOperation="source-over",e?r.drawImage(e,i.x-e.width/2,i.y-e.height/2):(r.fillStyle="rgba(255,220,120,0.95)",r.beginPath(),r.arc(i.x,i.y,50,0,2*Math.PI),r.fill())):(r.save(),r.globalCompositeOperation="source-over",l?r.drawImage(l,o.x-l.width/2,o.y-l.height/2):(r.fillStyle="rgba(210,230,255,0.95)",r.beginPath(),r.arc(o.x,o.y,50,0,2*Math.PI),r.fill())),r.restore()),function(e,t,r,a){var n,l;if(!function(e,t){if(X)return;let r=t[D];if(!r)return;let a=e.height,n=function(e,t,r){let a=[],n=r/11,l=.18*n;for(let e=0;e<10;e++){let i=t+n*(e+1),o=2*G(1e3+e)-1;a.push(W(i+o*l,t,t+r))}return a}(10,Math.round(.04*a),Math.round(.36*a)),l=[];for(let e=0;e<n.length;e++){let t=.55+1.1*z(),a=r.width*t,i=r.height*t,o=(28+16*z())*(1-(Math.min(1.65,Math.max(.55,t))-.55)*.08);l.push({kind:"cloud",src:D,y:n[e],w:a,h:i,baseAlpha:1,alive:!1,x:0,lastT:0,speed0:o,spawnAt:0,boostUntil:0,boostMul:1,orderIdx:e})}X=l}(t,a),!X)return;let{sun:i}=m(t,r),o=!!(null==i?void 0:i.visible);if(null===K&&(K=o),K&&!o&&(Y=!1,V=0,q=!1,H=null,J=!1),!K&&o){for(let e of(Y=!1,X))e.alive=!1;V=0,q=!1,H=null,J=!1}K=o;let s=t.width,u=t.height,h=W(null!=(n=null==i?void 0:i.easedAlt)?n:0,0,1),d=i?i.y/u:1;o?h>V?V=h:h<V-.001&&(q=!0):(V=0,q=!1);let c=null!==H&&d<H;H=d;let f=o&&c&&d<=.4&&!q,p=null!=(l=null==i?void 0:i.easedAlt)?l:0,g=p>.36?1:B((p-.3)/.06),b=f||p>.3;if(b&&!Y&&(!function(e,t){if(!X)return;let r=t.width,a=2.3*r;for(let t=0;t<X.length;t++){let n=X[t];n.alive=!0,n.x=r+(t+.5)*.61803398875%1*a+(z()-.5)*10,n.lastT=e,n.spawnAt=e,n.boostUntil=e}}(r,t),Y=!0),!b&&J)for(let e of X)e.alive&&e.x>s-1&&(e.alive=!1);J=b;let x=W((.5-d)/.5,0,1),v=Math.min(3,Math.max(0,Math.ceil(10*W(1-x,0,1)*Math.pow(g,1.2)))),w=e=>b&&e.orderIdx<v;for(let t of X){let n=a[t.src];if(!n||!t.alive)continue;let l=Math.max(0,r-t.lastT);t.lastT=r;let i=t.speed0*(p<=.3?1.8:1);t.x-=i*l;let o=s+t.w,u=w(t);if(u)for(;t.x<-t.w;)t.x+=o;else if(t.x<-t.w){t.alive=!1;continue}e.save(),e.globalAlpha=t.baseAlpha,e.globalCompositeOperation="source-over",e.drawImage(n,Math.round(t.x),Math.round(t.y),t.w,t.h),u&&t.x+t.w<s&&e.drawImage(n,Math.round(t.x+o),Math.round(t.y),t.w,t.h),e.restore()}}(r,t,n,u),function(e,t,r){let a=m(t,r),n=a.isDay,l=n?{x:a.sun.x,y:a.sun.y,eased:a.sun.easedAlt}:{x:a.moon.x,y:a.moon.y,eased:a.moon.easedAlt},i=$(n?.55+.35*l.eased:.3+.28*(1-a.skyAmt)+.1*l.eased,.22,n?.92:.62),o=n?280:200;e.save(),e.globalCompositeOperation="lighter",e.filter="blur(".concat(n?12:10,"px)"),e.globalAlpha=i;let s=e.createRadialGradient(l.x,l.y,20,l.x,l.y,o);n?(s.addColorStop(0,"rgba(255,240,200,0.65)"),s.addColorStop(.25,"rgba(255,225,160,0.34)"),s.addColorStop(.55,"rgba(255,210,120,0.16)"),s.addColorStop(.85,"rgba(255,200,100,0.06)"),s.addColorStop(1,"rgba(255,200,100,0.00)")):(s.addColorStop(0,"rgba(210,230,255,0.40)"),s.addColorStop(.3,"rgba(200,220,255,0.22)"),s.addColorStop(.6,"rgba(190,210,255,0.10)"),s.addColorStop(.88,"rgba(190,210,255,0.04)"),s.addColorStop(1,"rgba(190,210,255,0.00)")),e.fillStyle=s,e.beginPath(),e.arc(l.x,l.y,o,0,2*Math.PI),e.fill(),e.restore(),e.filter="none"}(r,t,n),function(e,t,r,a,n){var l,i;let o=function(e){let t=Number.isFinite(e)&&e>0?e:-1;return et!==t&&(er=P(e),et=t),er}(n);if(!o.length)return;let s=o.findIndex(e=>r>=e.startTime&&r<e.endTime);if(-1===s){let n=o[0],i=o[o.length-1],s=r<(null!=(l=null==n?void 0:n.startTime)?l:0)?n:i;if(!s)return;let u=a[ee(s.imagePath)];if(!u)return;let h=t.height-u.height;e.drawImage(u,0,h);return}let u=o[s],h=o[s+1],d=a[ee(u.imagePath)];if(!d)return;if(!h){let r=t.height-d.height;e.drawImage(d,0,r);return}let c=Math.max(1e-6,h.startTime-u.startTime),m=Math.max(0,Math.min(1,(r-u.startTime)/c)),f=null!=(i=a[ee(h.imagePath)])?i:d,p=t.width,g=p*m,b=t.height-d.height;e.drawImage(d,-g,b),e.drawImage(f,p-g,b)}(r,t,n,u,s),function(e,t,r,a){let n=function(){let e=P();return e.length<2?0:e[e.length-1].startTime}();if(r<1){let n=["/sprite/start1.png","/sprite/start2.png"],l=Math.min(1,Math.floor(r/1*n.length)),i=a[n[l]];if(!i)return;let{scale:o,offsetX:s,offsetY:u}=O,h=i.width*o,d=i.height*o,c=(t.width-h)/2+s,m=t.height-d-t.height*u;e.drawImage(i,c,m,h,d);return}if(r<n){let n=["/sprite/run1.png","/sprite/run2.png"],l=Math.floor(Math.max(0,r+j.audioLeadSec-j.runStartsAtSec)*(j.bpm/60)*j.framesPerBeat)%n.length,i=a[n[l]];if(!i)return;let{scale:o,offsetX:s,offsetY:u}=O,h=i.width*o,d=i.height*o,c=(t.width-h)/2+s,m=t.height-d-t.height*u;e.drawImage(i,c,m,h,d);return}if(r<n+1){let l=["/sprite/jump1.png","/sprite/jump2.png","/sprite/jump3.png","/sprite/jump4.png","/sprite/jump5.png"],i=1/l.length,o=Math.min(l.length-1,Math.floor((r-n)/i)),s=a[l[o]];if(!s)return;let{scale:u,offsetX:h,offsetY:d}=O,c=s.width*u,m=s.height*u,f=(t.width-c)/2+h,p=t.height-m-t.height*d;e.drawImage(s,f,p,c,m)}}(r,t,n,u),function(e,t,r,a){let n=a["/elements/hole.png"];if(!n||!ea.length)return;let l=ea.findIndex(e=>r>=e.startTime&&r<e.endTime);if(-1===l){if(r<ea[0].startTime)return;let l=a[en(ea[ea.length-1].imagePath)];if(!l)return;let i=t.height-l.height,o=(t.width-100)/2;e.drawImage(n,o,i+275,100,100);return}let i=ea.length-1,o=ea[l],s=a[en(o.imagePath)];if(!s)return;let u=t.height-s.height,h=l<i?ea[l+1]:void 0,d=h?a[en(h.imagePath)]:void 0,c=d?t.height-d.height:u,m=(t.width-100)/2;if(l===i-1&&h){let a=Math.min(1,Math.max(0,(r-o.startTime)/(o.endTime-o.startTime))),l=t.width;e.drawImage(n,l-l*a+m,c+275,100,100);return}l!==i||h||e.drawImage(n,m,u+275,100,100)}(r,t,n,u),function(e,t,r){let{skyAmt:a,twilightWarm:n,sun:l}=m(t,r),i=1-Z(.12,.35,l.easedAlt),o=1-.35*Q(n),s=Math.pow(1-a,1)*(1-.45*Q(n)),u=Z(-.05,.1,l.alt),h=(1-u)*s+i*o*u,d=Math.max(0,Math.min(.48,.48*(h*=1+.12*(1-Q(Math.abs(l.alt)/.045)))));d<=.002||(e.save(),e.globalCompositeOperation="source-over",e.globalAlpha=1,e.fillStyle="rgba(0,0,0,".concat(d,")"),e.fillRect(0,0,t.width,t.height),e.restore())}(r,t,n),function(e,t,r){let{enabled:a,in:n,out:l}=el;if(!a)return;let i=0;r>=n.start&&r<n.start+n.duration?i=Math.max(i,1-ei((r-n.start)/n.duration,n.ease)):r<n.start&&(i=Math.max(i,1)),r>=l.start&&(i=Math.max(i,ei((r-l.start)/l.duration,l.ease))),i<=0||(e.save(),e.globalAlpha=i,e.fillStyle="#000",e.fillRect(0,0,t.width,t.height),e.restore())}(r,t,n)}},[t,r,n,u,s]),null}function es(e){let{currentTime:t,isPlaying:r,duration:a}=e,i=(0,l.useRef)(null),[o,s]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=i.current;if(!e)return;let t=e.getContext("2d");t&&s(t);let r=()=>{e.width=800,e.height=400};return r(),window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),(0,n.jsxs)("div",{className:"canvas-wrapper",children:[(0,n.jsx)("canvas",{ref:i,className:"animation-canvas"}),(0,n.jsx)(eo,{canvas:i.current,ctx:o,currentTime:t,isPlaying:r,duration:a})]})}function eu(){let e=(0,l.useRef)(null),[t,r]=(0,l.useState)(!1),[a,o]=(0,l.useState)(0),[s,u]=(0,l.useState)(90),h=()=>{let t=e.current;t&&(t.pause(),t.currentTime=0,r(!1),o(0))};(0,l.useEffect)(()=>{let t=e.current;if(!t)return;let r=()=>o(t.currentTime),a=()=>{Number.isFinite(t.duration)&&t.duration>0&&u(t.duration)},n=()=>h();t.addEventListener("timeupdate",r),t.addEventListener("loadedmetadata",a),t.addEventListener("durationchange",a),t.addEventListener("canplaythrough",a),t.addEventListener("ended",n),t.load();let l=setTimeout(a,800);return()=>{t.removeEventListener("timeupdate",r),t.removeEventListener("loadedmetadata",a),t.removeEventListener("durationchange",a),t.removeEventListener("canplaythrough",a),t.removeEventListener("ended",n),clearTimeout(l)}},[]);let d=e=>{let t=Math.floor(e/60),r=Math.floor(e%60).toString().padStart(2,"0");return"".concat(t,":").concat(r)},c=s?a/s*100:0;return(0,n.jsxs)("div",{className:"controller",children:[(0,n.jsxs)("audio",{ref:e,preload:"auto",style:{display:"none"},children:[(0,n.jsx)("source",{src:"/music/song.mp3",type:"audio/mpeg"}),"Your browser does not support the audio element."]}),(0,n.jsx)("div",{className:"animation-wrapper",children:(0,n.jsx)(es,{isPlaying:t,currentTime:Math.max(0,a-.5),duration:s})}),(0,n.jsx)("div",{className:"controller-controls",children:(0,n.jsxs)("div",{className:"controller-bar",children:[(0,n.jsxs)("div",{className:"controller-buttons",children:[(0,n.jsx)("button",{onClick:()=>{let t=e.current;t&&(t.paused?t.play().then(()=>r(!0)).catch(()=>{}):(t.pause(),r(!1)))},onMouseUp:e=>e.currentTarget.blur(),"aria-label":t?"Pause":"Play",children:t?(0,n.jsx)(i.kwt,{"aria-hidden":"true"}):(0,n.jsx)(i.gSK,{"aria-hidden":"true"})}),(0,n.jsx)("button",{onClick:h,onMouseUp:e=>e.currentTarget.blur(),"aria-label":"Restart",children:(0,n.jsx)(i.Swo,{"aria-hidden":"true"})})]}),(0,n.jsx)("div",{className:"controller-track",onClick:t=>{let r=e.current;if(!r||!s)return;let a=t.currentTarget.getBoundingClientRect();r.currentTime=Math.max(0,Math.min(s,(t.clientX-a.left)/a.width*s))},children:(0,n.jsx)("div",{className:"progress",style:{width:"".concat(c,"%")}})}),(0,n.jsxs)("div",{className:"controller-time",children:[d(a)," / ",d(s)]})]})})]})}function eh(){return(0,n.jsxs)("main",{children:[(0,n.jsx)(eu,{}),(0,n.jsxs)("p",{className:"credit",children:["Music credit:"," ",(0,n.jsx)("a",{href:"https://open.spotify.com/artist/5e8lAFGws51fgjO9MWXnrt",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit",textDecoration:"underline",textUnderlineOffset:"2px"},"aria-label":"Ankyl on Spotify (opens in a new tab)",children:"Ankyl - “Fennec Takes Charge”"})]})]})}r(4493)},9014:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[424,711,441,684,358],()=>t(8563)),_N_E=e.O()}]);